<!doctype html>

<html lang="en-US">

<head>
	<meta charset="UTF-8" />
	<title>My own Blog</title>

	<link href="style.css" rel="stylesheet" type="text/css">
	<link href="styles/print/main.css" rel="stylesheet" type="text/css" media="print">
	<!--[if IE]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
	<!--[if IE 6]>
<script src="js/belatedPNG.js"></script>
<script>
	DD_belatedPNG.fix('*');
</script>
<![endif]-->
	<script defer>
		async function getTheBlogs() {
			let response = await fetch(`http://localhost:3000/Blog/blogs`, {
				method: 'GET',
				headers: {
					'Content-Type': 'application/json'

				},
			});
			let flag = true;
			response = await response.json();
			console.log(response)
			for (let i = 0; i < response.length; i++) {
				for (let j = 0; j < response[i].blogs.length; j++) {
					let articleTag = document.createElement('article');
					articleTag.className = "post";
					articleTag.style = "margin-top:10%";
					let headerTag = document.createElement('header');
					headerTag.className = "postheader";
					let titleTag = document.createElement('h2');
					titleTag.innerHTML = "Title of the Blog:: " + response[i].blogs[j].title;
					let postDescription = document.createElement('p');
					let dateTag = document.createElement('p');
					let creatorTag = document.createElement('p');
					creatorTag.innerHTML="creatorName:: "+response[i].username;
					// let buttonTag = document.createElement('button');
					// buttonTag.innerText='Delete the Blog';
					postDescription.innerHTML = "Description of Blog:: " + response[i].blogs[j].description;
					dateTag.innerHTML = "Date created:: " + response[i].blogs[j].date;

					let section = document.getElementById("contents");
					section.appendChild(articleTag);
					articleTag.appendChild(headerTag);
					headerTag.appendChild(titleTag);
					articleTag.appendChild(postDescription);
					articleTag.appendChild(dateTag);
					articleTag.appendChild(creatorTag);
					flag = false;
				}
			}
			if (flag) {
				let section = document.getElementById("contents");
				let headerTag = document.createElement('header');
				headerTag.className = "postheader";
				headerTag.innerHTML = "There are  no blogs"
				section.appendChild(headerTag);
			}
		}

	</script>
</head>

<body onload="getTheBlogs()">
	<div id="wrap">

		<section id="top">
			<nav id="mainnav">
				<h1 id="sitename" class="logotext">
					<a href="#">My own Blog</a>
				</h1>
				<ul>
					<li class="active"><a href="index.html"><span>Home</span></a></li>
					<li><a href="Signup.html"><span>create New Blog</span></a></li>
					<li><a href="Signup.html"><span>Delete a Blog</span></a></li>
					<li><a href="Signup.html"><span>Modify a new Blog</span></a></li>
					<li><a href="Signup.html"><span>About</span></a></li>
					<li><a href="Signup.html"><span>Help</span></a></li>
				</ul>
			</nav>
		</section>
		<section id="page">
			<section id="contents">

				<!-- <article class="post" style="margin-top: 10%;">
					<header class="postheader">
						<h2><a href="#">Blog Post Title</a></h2>
						<p class="postinfo">Published on <time>18 August, 2010</time> under <a href="#">CSS Templates
							</a></p>
					</header>
					<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus varius nulla vel metus
						facilisis congue. Phasellus sed velit ipsum. Morbi suscipit ipsum vel tellus pulvinar aliquam.
						Aliquam non dui vel magna mollis molestie a nec quam.<a href="#"> Read More</a></p>
				</article> -->
			</section>
	</div>
	<footer id="pagefooter">
	</footer>

</body>

</html>